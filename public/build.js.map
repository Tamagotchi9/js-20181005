{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./scripts/app.js","webpack:///./scripts/phones/phones-page.js","webpack:///./scripts/phones/components/phone-catalog.js","webpack:///./scripts/component.js","webpack:///./scripts/phones/components/phone-viewer.js","webpack:///./scripts/phones/components/shopping-cart.js","webpack:///./scripts/phones/components/filter.js","webpack:///./scripts/phones/phone-service.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AAAA;AAAY;;AAEqC;;AAEjD;;AAEA,sBAAsB,8DAAU;AAChC;AACA,CAAC;;;;;;;;ACRD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAY;;AAE6C;AACF;AACE;AACb;AACE;;AAE/B;AACf,eAAe,UAAU;AACzB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,oEAAY;AACpC;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,sBAAsB,yDAAY;;AAElC;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA,uBAAuB,mEAAW;AAClC;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;;AAEA;AACA,qBAAqB,oEAAY;AACjC;AACA,KAAK;AACL;;AAEA;AACA,uBAAuB,6DAAM;AAC7B;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,yBAAyB,yDAAY;AACrC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxGA;AAAA;AAAA;AAA2C;;AAE5B,2BAA2B,qDAAS;AACnD,eAAe,UAAU;AACzB,WAAW,UAAU;;AAErB;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV,2EAA2E,WAAW;AACtF,wBAAwB,WAAW;AACnC,0BAA0B,aAAa,SAAS,iBAAiB;AACjE;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,WAAW,8BAA8B,aAAa;AAC9E,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnDA;AAAA;AAAe;AACf,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE,YAAY;;AAEhF;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,oDAAoD,cAAc;;AAElE;AACA;;AAEA;;;;;;;;ACvCA;AAAA;AAAA;AAA2C;;;AAG5B,0BAA0B,qDAAS;AAClD,eAAe,UAAU;AACzB,WAAW,UAAU;;AAErB;AACA;AACA,KAAK;;AAEL;AACA,uC;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,eAAe,4BAA4B;;AAE3C;AACA,gCAAgC,qBAAqB;;AAErD;AACA;;;AAGA,YAAY,OAAO;AACnB,WAAW,cAAc;;AAEzB;AACA,UAAU;AACV;AACA,uDAAuD,QAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACpDA;AAAA;AAAA;AAA0C;;AAE3B,2BAA2B,qDAAS;AACnD,iBAAiB,UAAU;AAC3B,eAAe,UAAU;;AAEzB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,oDAAoD,KAAK;AACzD,gBAAgB,KAAK,IAAI,WAAW;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACtDA;AAAA;AAAA;AAA2C;;AAE3B,qBAAqB,qDAAS;AAC9C,iBAAiB,UAAU;AAC3B,eAAe,UAAU;;AAEzB;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACnCA;AAAA;;AAEA;AACA,UAAU,iBAAiB,KAAK;AAChC;AACA;AACA;AACA;AACA,SAAS;AACT,GAAG;;AAEH;AACA,uCAAuC,UAAU;AACjD,GAAG;;AAEH,4BAA4B;AAC5B,sBAAsB,UAAU,EAAE,MAAM;AACxC;AACA,GAAG;;AAEH,oBAAoB,eAAe,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEe,2EAAY,EAAC","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict'\r\n\r\nimport PhonesPage from './phones/phones-page.js';\r\n\r\nalert(1111);\r\n\r\nlet currentPage = new PhonesPage({\r\n  element: document.querySelector('[data-page-container]'),\r\n});\r\n","'use strict'\r\n\r\nimport PhoneCatalog from './components/phone-catalog.js';\r\nimport PhoneViewer from './components/phone-viewer.js';\r\nimport ShoppingCart from \"./components/shopping-cart.js\";\r\nimport Filter from \"./components/filter.js\";\r\nimport PhoneService from './phone-service.js';\r\n\r\nexport default class PhonesPage {\r\n  constructor({ element }) {\r\n    this._element = element;\r\n\r\n    this._render();\r\n\r\n    this._initCatalog();\r\n    this._initViewer();\r\n    this._initShoppingCart();\r\n    this._initFilter();\r\n  }\r\n\r\n  _initCatalog() {\r\n    this._catalog = new PhoneCatalog({\r\n      element: this._element.querySelector('[data-component=\"phone-catalog\"]'),\r\n    });\r\n\r\n    this._showFilteredPhones();\r\n\r\n    this._catalog.subscribe('add', (phoneId) => {\r\n      this._cart.add(phoneId);\r\n    });\r\n\r\n    this._catalog.subscribe('phone-selected', (phoneId) => {\r\n      const promise = PhoneService.getOneById(phoneId);\r\n\r\n      promise.then((phoneDetails) => {\r\n        this._catalog.hide();\r\n        this._viewer.show(phoneDetails);\r\n      });\r\n    });\r\n  }\r\n\r\n  _initViewer() {\r\n    this._viewer = new PhoneViewer({\r\n      element: this._element.querySelector('[data-component=\"phone-viewer\"]'),\r\n    });\r\n\r\n    this._viewer.subscribe(\"back\", () =>  {\r\n      this._viewer.hide();\r\n      this._showFilteredPhones();\r\n    });\r\n\r\n    this._viewer.subscribe(\"add\", (phoneId) => {\r\n      this._cart.add(phoneId)\r\n    });\r\n  }\r\n\r\n  _initShoppingCart() {\r\n    this._cart = new ShoppingCart({\r\n      element: document.querySelector('[data-component=\"shopping-cart\"]'),\r\n    });\r\n  }\r\n\r\n  _initFilter() {\r\n    this._filter = new Filter({\r\n      element: document.querySelector('[data-component=\"filter\"]'),\r\n    });\r\n\r\n    this._filter.subscribe('filter', (query) => {\r\n      this._currentQuery = query;\r\n      this._showFilteredPhones();\r\n    });\r\n\r\n    this._filter.subscribe('change-order', (orderBy) => {\r\n      this._currentOrderBy = orderBy;\r\n      this._showFilteredPhones();\r\n    });\r\n  }\r\n\r\n  async _showFilteredPhones() {\r\n    const phones = await PhoneService.getAll({\r\n      query: this._currentQuery,\r\n      orderBy: this._currentOrderBy\r\n    })\r\n        this._catalog.show(phones);\r\n  }\r\n\r\n  _render() {\r\n    this._element.innerHTML = `\r\n      <div class=\"row\">\r\n  \r\n        <!--Sidebar-->\r\n        <div class=\"col-md-2\">\r\n          <div data-component=\"filter\"></div>\r\n          <div data-component=\"shopping-cart\"></div>\r\n        </div>\r\n    \r\n        <!--Main content-->\r\n        <div class=\"col-md-10\">\r\n          <div data-component=\"phone-catalog\"></div>\r\n          <div data-component=\"phone-viewer\"></div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n","import Component from '../../component.js';\r\n\r\nexport default class PhoneCatalog extends Component {\r\n  constructor({ element }) {\r\n    super({ element });\r\n\r\n    this._phones = [];\r\n\r\n    this._render();\r\n\r\n    this.on('click', 'phone-link',  (event) => {\r\n      const phoneElement = event.target.closest('[data-element=\"phone-item\"]');\r\n\r\n      this.emit('phone-selected', phoneElement.dataset.phoneId);\r\n    });\r\n\r\n    this.on('click', \"add-button\",  (event) => {\r\n      const phoneElement = event.target.closest('[data-element=\"phone-item\"]');\r\n\r\n      this.emit('add', phoneElement.dataset.phoneId);\r\n    });\r\n  }\r\n\r\n  show(phones) {\r\n    this._phones = phones;\r\n    this._render();\r\n    super.show();\r\n  }\r\n\r\n  _render() {\r\n    this._element.innerHTML = `\r\n      <ul class=\"phones\">\r\n        ${ this._phones.map(phone => `\r\n          <li class=\"thumbnail\" data-element=\"phone-item\" data-phone-id=\"${ phone.id }\">\r\n            <a href=\"#${ phone.id }\" class=\"thumb\" data-element=\"phone-link\">\r\n              <img alt=\"${ phone.name }\" src=\"${ phone.imageUrl }\">\r\n            </a>\r\n  \r\n            <div class=\"phones__btn-buy-wrapper\">\r\n              <a class=\"btn btn-success\" data-element=\"add-button\">\r\n                Add\r\n              </a>\r\n            </div>\r\n  \r\n            <a href=\"#${ phone.id }\" data-element=\"phone-link\">${ phone.name }</a>\r\n            <p>${ phone.snippet }</p>\r\n          </li>\r\n        `).join('') }\r\n      </ul>\r\n    `;\r\n  }\r\n}\r\n","export default class Component {\r\n  constructor({element}) {\r\n    this._element = element;\r\n  }\r\n\r\n  show() {\r\n    this._element.hidden = false;\r\n  }\r\n\r\n  hide() {\r\n    this._element.hidden = true;\r\n  }\r\n\r\n  on(eventName, elementName, callback) {\r\n    this._element.addEventListener(eventName, (event) => {\r\n      const delegateTarget = event.target.closest(`[data-element='${elementName}']`);\r\n\r\n      if (!delegateTarget) {\r\n        return;\r\n      }\r\n\r\n      event.delegateTarget = delegateTarget;\r\n\r\n      callback(event);\r\n    });\r\n  }\r\n\r\n  subscribe(eventName, callback) {\r\n    this._element.addEventListener(eventName, (event) => {\r\n      callback(event.detail);\r\n    });\r\n  }\r\n\r\n  emit(eventName, data) {\r\n    const customEvent = new CustomEvent(eventName, {detail: data });\r\n\r\n    this._element.dispatchEvent(customEvent);\r\n  }\r\n\r\n}\r\n","import Component from '../../component.js';\r\n\r\n\r\nexport default class PhoneViewer extends Component {\r\n  constructor({ element }) {\r\n    super({ element });\r\n\r\n    this.on('click', 'back-button', () => {\r\n      this.emit(\"back\");\r\n    });\r\n\r\n    this.on('click', 'add-button', () => {\r\n      this.emit(\"add\", this._phone.id); \r\n    });\r\n\r\n    this.on('click', 'small-image', (event) => {\r\n      this._currentImage = event.delegateTarget.src;\r\n      this._render();\r\n    });\r\n  }\r\n\r\n  show(phone) {\r\n    this._phone = phone;\r\n    this._currentImage = phone.images[0];\r\n\r\n    this._render();\r\n\r\n    super.show();\r\n  }\r\n\r\n    _render() {\r\n        const { name, description, images } = this._phone;\r\n\r\n        this._element.innerHTML = `\r\n      <img class=\"phone\" src=\"${ this._currentImage }\"  alt=\"\"/>\r\n  \r\n      <button data-element=\"back-button\">Back</button>\r\n      <button data-element=\"add-button\">Add to basket</button>\r\n  \r\n  \r\n      <h1>${ name }</h1>\r\n      <p>${ description }</p>\r\n  \r\n      <ul class=\"phone-thumbs\" data-element=\"small-photos\">\r\n        ${ images.map(image => `\r\n            <li>\r\n                <img data-element=\"small-image\" src=\"${ image }\" alt=\"\">\r\n            </li>\r\n        `).join(\"\")}\r\n      </ul>\r\n    `;\r\n    }\r\n}\r\n\r\n","import Component from '../../component.js'\r\n\r\nexport default class ShoppingCart extends Component {\r\n    constructor({ element }) {\r\n        super({ element })\r\n\r\n        this._items = {\r\n            'Samsung Galaxy S9': 2,\r\n        };\r\n\r\n        this._render();\r\n\r\n        this.on('click', 'remove-button', (event) => {\r\n            const item = event.target.closest('[data-element=\"item\"]')\r\n            this.remove(item.dataset.itemId);\r\n        });\r\n    }\r\n\r\n    add(itemId) {\r\n        if (!this._items[itemId]) {\r\n            this._items[itemId] = 0;\r\n        }\r\n\r\n        this._items[itemId] += 1;\r\n\r\n        this._render();\r\n    }\r\n\r\n    remove(itemId) {\r\n        this._items[itemId] -= 1;\r\n\r\n        if (this._items[itemId] === 0) {\r\n            delete this._items[itemId];\r\n        }\r\n\r\n        this._render();\r\n    }\r\n\r\n    _render() {\r\n        this._element.innerHTML = `\r\n      <section>\r\n        <h3>Shopping Cart</h3>\r\n        <ul>\r\n          ${ Object.entries(this._items).map(([id, quantity]) => `\r\n            <li data-element=\"item\" data-item-id=\"${ id }\">\r\n              ${ id } (${ quantity })\r\n              <button data-element=\"remove-button\">x</button>\r\n            </li>\r\n            \r\n          `).join('')}\r\n        </ul>\r\n      </section>\r\n    `;\r\n    }\r\n}","import Component from \"../../component.js\";\r\n\r\nexport  default class Filter extends Component {\r\n    constructor({ element }) {\r\n        super({ element });\r\n\r\n        this._render();\r\n\r\n        this.on('input', 'query', (event) => {\r\n            this.emit('filter',event.delegateTarget.value);\r\n        });\r\n\r\n        this.on('change', 'order-by', (event) => {\r\n            this.emit('change-order',event.delegateTarget.value);\r\n        });\r\n    }\r\n\r\n    _render() {\r\n        this._element.innerHTML = `\r\n        <section>\r\n            <p>\r\n              Search:\r\n              <input data-element=\"query\">\r\n            </p>\r\n    \r\n            <p>\r\n              Sort by:\r\n              <select data-element=\"order-by\">\r\n                <option value=\"name\">Alphabetical</option>\r\n                <option value=\"age\">Newest</option>\r\n              </select>\r\n            </p>\r\n          </section>\r\n        `;\r\n    }\r\n}","const API_URL = `https://mgrinko.github.io/js-20181004/api`;\r\n\r\nconst PhoneService = {\r\n  getAll({ query, orderBy } = {}) {\r\n      return this.fetchData(`/phones`)\r\n        .then(phones => {\r\n            const filteredPhones = this._filter(phones, query);\r\n            return this._sort(filteredPhones, orderBy);\r\n        })\r\n  },\r\n\r\n  getOneById(phoneId) {\r\n      return this.fetchData(`/phones/${ phoneId }`);\r\n  },\r\n\r\n  fetchData(url, params = {}) {\r\n      return fetch(`${ API_URL }${ url }.json`, params)\r\n          .then((response) => response.json())\r\n  },\r\n\r\n  sendRequest(url, {method = \"GET\"} = {}) {\r\n    return new Promise(\r\n      (resolve, reject) => {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open(method, url,\r\n              true);\r\n        xhr.send();\r\n\r\n        xhr.onload = () => {\r\n          if(xhr.status !== 200) {\r\n            reject(new Error(xhr.status + ' : ' + xhr.statusText));\r\n          } else {\r\n            resolve(JSON.parse(xhr.responseText));\r\n            }\r\n          };\r\n        });\r\n  },\r\n\r\n  _filter(phones, query) {\r\n    if(!query) {\r\n      return phones;\r\n    }\r\n\r\n    const normalizedQuery = query.toLowerCase();\r\n    return phones\r\n        .filter(phone => {\r\n          const normalizedName = phone.name.toLowerCase();\r\n          return normalizedName.includes(normalizedQuery)\r\n        });\r\n  },\r\n\r\n  _sort(phones, orderBy) {\r\n    if(!orderBy) {\r\n      return phones;\r\n    }\r\n\r\n    return [...phones].sort((phone1, phone2) => {\r\n      return (phone1[orderBy] > phone2[orderBy]) ? 1 : -1;\r\n    });\r\n  }\r\n}\r\n\r\nexport default PhoneService;\r\n"],"sourceRoot":""}